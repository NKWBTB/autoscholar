#+TITLE: Extract Mendeley highlights

* Prerequisite

First install [[https://racket-lang.org/][Racket]] (require 6.12 or
higher), then install a racket package =pdf-read= (run the following
from command line):

#+BEGIN_EXAMPLE
raco pkg install pdf-read
#+END_EXAMPLE

Install =libpoppler-glib= library.

#+BEGIN_EXAMPLE
apt install libpoppler-glib-dev
#+END_EXAMPLE

* Running the tool

You can run the tool via =racket cmd.rkt=, or generate executable by
=raco exe cmd.rkt=, and run the executable =cmd= directly.

Helper options:
#+BEGIN_SRC sh
# show help
./cmd --help
# show available group names
./cmd -l /path/to/mendeley.sqlite
#+END_SRC

Generate text or html. Will generate files for each documents in the
group, indexed by =documentId=.

#+BEGIN_SRC sh
# output <id>-pdf-path.txt <id>-hl.txt and <id>-full.txt
./cmd -g your-group-name /path/to/mendeley.sqlite
# output <id>-pdf-path.txt <id>.html
./cmd -g your-group-name --html /path/to/mendeley.sqlite
#+END_SRC


* download html from publishers website

You need to clone https://github.com/abiyani/automate-save-page-as and
put the executable to your =$PATH=. You should also install =xdotool=
(used by =save_page_as=). You should also install =firefox=, cause
this tool seems not working with =chromium=.

#+BEGIN_EXAMPLE
./webpage.py -g "Group Name" /path/to/db.sqlite
#+END_EXAMPLE

It will write html files to =<ID>.html= for each document.
